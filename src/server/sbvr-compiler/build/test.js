// Term:      integer
// Term:      person
// Term:      age
	// Concept Type: integer
// Fact type: person has age
// Rule:      It is obligatory that each person has exactly one age
// Term:      student
  // Concept Type: person
	// Definition: Value1 or Value2
	// Synonym: pupil
	// Database Table Name: student_table
	// Database ID Field: id_field
	// Database Name Field: name_field
// Term:      module
// Fact type: student has module
// Fact type: student is registered for module
// Rule:      It is obligatory that each student is registered for at most 5 modules
// Term:      study programme
// Fact type: pupil is enrolled in study programme
// Fact type: module is available for study programme
// Rule:      It is obligatory that each student that is registered for a module is enrolled in a study programme that the module is available for
// Term:      lecturer
	// Concept Type: person
// Fact type: student is under probation
// Rule:      It is obligatory that each student is registered for at most 5 modules
// Rule:      It is obligatory that each student that is under probation is registered for at most 3 modules
// Rule:      It is obligatory that at most 10 students are under probation
// Fact type: lecturer grades student for study programme with grade
// Rule:      It is prohibited that a student that is under probation is enrolled in more than 2 study programmes
// Rule:      It is obligatory that each student is registered for each module

// T: educational institution
// --Test comment
// --Test comment Term: With ignored term
// F: person is enrolled in educational institution
// F: module is available for study programme
// F: student is school president 
	// Database Table Name: school_president
	// Database ID Field: id_field
	// Database Name Field: name_field
// F: student is registered for module
// F: student is registered for module to catchup
// F: student is registered for module with lecturer
// F: person is swimming
// F: lecturer is teacher of module 
// R: It is obligatory that	a student is school president
// R: It is necessary that	a student is school president
// R: It is possible that		a student is school president
// R: It is permissible that	a student is school president
// R: It is prohibited that	some students are school president
// R: It is impossible that	some students are school president
// R: It is not possible that	some students are school president
// R: It is obligatory that each	student		is registered for at least one module
// R: It is obligatory that a		student		is registered for at least one module
// R: It is obligatory that an	student		is registered for at least one module
// R: It is obligatory that some	students	are registered for at least one module
// R: It is obligatory that at most 50	students are registered for at least one module
// R: It is obligatory that at least one	student is registered for at least one module
// R: It is obligatory that more than 0	students are registered for at least one module
// R: It is obligatory that exactly one	student is school president
// R: It is obligatory that at least one and at most 50	students are registered for at least one module
// R: It is obligatory that a student is registered for a module with a lecturer
// R: It is obligatory that a student that is registered for a module that is available for a study programme is enrolled in a study programme that the module is available for
// R: It is obligatory that each student that is registered for a module is enrolled in a study programme that the module is available for
// R: It is obligatory that exactly 0 people are swimming
// R: It is obligatory that each student is registered for a module that is available for a study programme
// R: It is obligatory that each student that is school president, is registered for at least 8 modules
// R: It is obligatory that each student has exactly 1 age
// R: It is obligatory that each student is enrolled in an educational institution




// Term:      integer
// Term:      person
// Term:      age
	// Concept Type: integer
// Fact type: person has age
// Rule:      It is obligatory that each person has exactly one age
// Term:      student
  // Concept Type: person
// Fact type: student is school president
// Rule:      It is obligatory that a student is school president
// Term:      module
// Fact type: student has module
// Fact type: student is registered for module
// Rule:      It is obligatory that each student is registered for at most 5 modules
// Term:      study programme
// Fact type: student is enrolled in study programme
// Fact type: module is available for study programme
// Rule:      It is obligatory that each student that is registered for a module is enrolled in a study programme that the module is available for
// Term:      lecturer
// Fact type: student is under probation
// Rule:      It is obligatory that each student is registered for at most 5 modules
// Rule:      It is obligatory that each student that is under probation is registered for at most 3 modules
// Rule:      It is obligatory that at most 10 students are under probation
// Fact type: lecturer grades student for study programme with grade
// Rule:      It is prohibited that a student that is under probation is enrolled in more than 2 study programmes
// Rule:      It is obligatory that each student is registered for each module


// require(['sbvr-parser/SBVRParser', 'sbvr-compiler/LF2AbstractSQLPrep', 'Prettify'], function(SBVRParser, LF2AbstractSQLPrep, Prettify) {
	// console.log(Prettify.match(LF2AbstractSQLPrep.match(SBVRParser.matchAll(sbvrEditor.getValue(),'expr'),'Process'), 'Process'))
// });

// require(['sbvr-parser/SBVRParser', 'sbvr-compiler/LF2AbstractSQLPrep'], function(SBVRParser, LF2AbstractSQLPrep) {
	// console.log(JSON.stringify(LF2AbstractSQLPrep.match(SBVRParser.matchAll(sbvrEditor.getValue(),'expr'),'Process')))
// });

// require(['sbvr-parser/SBVRParser', 'sbvr-compiler/LF2AbstractSQLPrep'], function(SBVRParser, LF2AbstractSQLPrep) {
	// console.log(JSON.stringify(SBVRParser.matchAll(sbvrEditor.getValue(),'expr'),'Process'))
// });

// require(['sbvr-parser/SBVRParser', 'sbvr-compiler/LF2AbstractSQLPrep', 'Prettify', 'LF2AbstractSQL'], function(SBVRParser, LF2AbstractSQLPrep, Prettify, LF2AbstractSQL) {
	// console.log(Prettify.match(LF2AbstractSQL.match(LF2AbstractSQLPrep.match(SBVRParser.matchAll(sbvrEditor.getValue(),'expr'),'Process'), 'Process'), 'Process'))
// });

var prettify = function(key, value) {
	var uglifyjs = require('uglify-js');
	var stringy = 'var ' + key + ' = ' + JSON.stringify(value);
	var ast = uglifyjs.parser.parse(stringy);
	console.log(uglifyjs.uglify.gen_code(ast, {beautify: true}));
}

requirejs = require('requirejs');
requirejs.config({
	paths: {
		'ometa': '../../../external/ometa-js',
		'underscore': '../../../external/underscore-1.2.1.min',
		'Prettify': '../../../client/prettify-ometa/src/Prettify',
		'sbvr-compiler': '../src/',
		'sbvr-parser': '../../../common/sbvr-parser/src/'
	}
});

LF2AbstractSQLPrep = requirejs('sbvr-compiler/LF2AbstractSQLPrep');
LF2AbstractSQL = requirejs('../src/LF2AbstractSQL.js');
AbstractSQLOptimiser = requirejs('../src/AbstractSQLOptimiser.js');
Prettify = requirejs('Prettify');
AbstractSQL2SQL = requirejs('../src/AbstractSQL2SQL.js').postgres;
AbstractSQLRules2SQL = requirejs('../src/AbstractSQLRules2SQL.js');
_ = requirejs('underscore');

// result = AbstractSQLOptimiser.match(
	// [	'Not',
		// [	'Not',
			// [	'Equals',
				// [	'Number',
					// 1
				// ],
				// [	'Number',
					// 1
				// ]
			// ]
		// ]
	// ]
	// , 'Process'
// );
// console.log(Prettify.match(result, 'Process'));


var model = //["model",["term","integer",[]],["term","person",[]],["term","age",[["ConceptType",["term","integer"]]]],["fcTp",["term","person"],["verb","has"],["term","age"],[]],["rule",["obl",["univQ",["var",["num",0],["term","person"]],["exactQ",["card",["num",1]],["var",["num",1],["term","age"]],["aFrm",["fcTp",["term","person"],["verb","has"],["term","age"]],["bind",["term","person"],0],["bind",["term","age"],1]]]]],["text","It is obligatory that each person has exactly one age"]],["term","student",[["ConceptType",["term","person"]],["Definition",["Enum",["Value1","Value2"]]],["Synonym",["term","pupil"]],["DatabaseTableName","student_table"],["DatabaseIDField","id_field"],["DatabaseNameField","name_field"]]],["term","module",[]],["fcTp",["term","student"],["verb","has"],["term","module"],[]],["fcTp",["term","student"],["verb","is registered for"],["term","module"],[]],["rule",["obl",["univQ",["var",["num",0],["term","student"]],["atMostQ",["maxCard",["num",5]],["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]]],["text","It is obligatory that each student is registered for at most 5 modules"]],["term","study programme",[]],["fcTp",["term","student"],["verb","is enrolled in"],["term","study programme"],[]],["fcTp",["term","module"],["verb","is available for"],["term","study programme"],[]],["rule",["obl",["univQ",["var",["num",0],["term","student"],["existQ",["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]],["existQ",["var",["num",2],["term","study programme"],["aFrm",["fcTp",["term","module"],["verb","is available for"],["term","study programme"]],["bind",["term","module"],1],["bind",["term","study programme"],2]]],["aFrm",["fcTp",["term","student"],["verb","is enrolled in"],["term","study programme"]],["bind",["term","student"],0],["bind",["term","study programme"],2]]]]],["text","It is obligatory that each student that is registered for a module is enrolled in a study programme that the module is available for"]],["term","lecturer",[["ConceptType",["term","person"]]]],["fcTp",["term","student"],["verb","is under probation"],[]],["rule",["obl",["univQ",["var",["num",0],["term","student"]],["atMostQ",["maxCard",["num",5]],["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]]],["text","It is obligatory that each student is registered for at most 5 modules"]],["rule",["obl",["univQ",["var",["num",0],["term","student"],["aFrm",["fcTp",["term","student"],["verb","is under probation"]],["bind",["term","student"],0]]],["atMostQ",["maxCard",["num",3]],["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]]],["text","It is obligatory that each student that is under probation is registered for at most 3 modules"]],["rule",["obl",["atMostQ",["maxCard",["num",10]],["var",["num",0],["term","student"]],["aFrm",["fcTp",["term","student"],["verb","is under probation"]],["bind",["term","student"],0]]]],["text","It is obligatory that at most 10 students are under probation"]],["fcTp",["term","lecturer"],["verb","grades"],["term","student"],["verb","for"],["term","study programme"],["verb","with grade"],[]],["rule",["obl",["neg",["existQ",["var",["num",0],["term","student"],["aFrm",["fcTp",["term","student"],["verb","is under probation"]],["bind",["term","student"],0]]],["atLeastQ",["minCard",["num",3]],["var",["num",1],["term","study programme"]],["aFrm",["fcTp",["term","student"],["verb","is enrolled in"],["term","study programme"]],["bind",["term","student"],0],["bind",["term","study programme"],1]]]]]],["text","It is prohibited that a student that is under probation is enrolled in more than 2 study programmes"]],["rule",["obl",["univQ",["var",["num",0],["term","student"]],["univQ",["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]]],["text","It is obligatory that each student is registered for each module"]],["term","educational institution",[]],["fcTp",["term","person"],["verb","is enrolled in"],["term","educational institution"],[]],["fcTp",["term","module"],["verb","is available for"],["term","study programme"],[]],["fcTp",["term","student"],["verb","is school president"],[["DatabaseTableName","school_president"],["DatabaseIDField","id_field"],["DatabaseNameField","name_field"]]],["fcTp",["term","student"],["verb","is registered for"],["term","module"],[]],["fcTp",["term","student"],["verb","is registered for"],["term","module"],["verb","to catchup"],[]],["fcTp",["term","student"],["verb","is registered for"],["term","module"],["verb","with"],["term","lecturer"],[]],["fcTp",["term","person"],["verb","is swimming"],[]],["fcTp",["term","lecturer"],["verb","is teacher of"],["term","module"],[]],["rule",["obl",["existQ",["var",["num",0],["term","student"]],["aFrm",["fcTp",["term","student"],["verb","is school president"]],["bind",["term","student"],0]]]],["text","It is obligatory that\ta student is school president"]],["rule",["nec",["existQ",["var",["num",0],["term","student"]],["aFrm",["fcTp",["term","student"],["verb","is school president"]],["bind",["term","student"],0]]]],["text","It is necessary that\ta student is school president"]],["rule",["pos",["existQ",["var",["num",0],["term","student"]],["aFrm",["fcTp",["term","student"],["verb","is school president"]],["bind",["term","student"],0]]]],["text","It is possible that\t\ta student is school president"]],["rule",["prm",["existQ",["var",["num",0],["term","student"]],["aFrm",["fcTp",["term","student"],["verb","is school president"]],["bind",["term","student"],0]]]],["text","It is permissible that\ta student is school president"]],["rule",["obl",["neg",["existQ",["var",["num",0],["term","student"]],["aFrm",["fcTp",["term","student"],["verb","is school president"]],["bind",["term","student"],0]]]]],["text","It is prohibited that\tsome students are school president"]],["rule",["nec",["neg",["existQ",["var",["num",0],["term","student"]],["aFrm",["fcTp",["term","student"],["verb","is school president"]],["bind",["term","student"],0]]]]],["text","It is impossible that\tsome students are school president"]],["rule",["nec",["neg",["existQ",["var",["num",0],["term","student"]],["aFrm",["fcTp",["term","student"],["verb","is school president"]],["bind",["term","student"],0]]]]],["text","It is not possible that\tsome students are school president"]],["rule",["obl",["univQ",["var",["num",0],["term","student"]],["atLeastQ",["minCard",["num",1]],["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]]],["text","It is obligatory that each\tstudent\t\tis registered for at least one module"]],["rule",["obl",["existQ",["var",["num",0],["term","student"]],["atLeastQ",["minCard",["num",1]],["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]]],["text","It is obligatory that a\t\tstudent\t\tis registered for at least one module"]],["rule",["obl",["existQ",["var",["num",0],["term","student"]],["atLeastQ",["minCard",["num",1]],["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]]],["text","It is obligatory that an\tstudent\t\tis registered for at least one module"]],["rule",["obl",["existQ",["var",["num",0],["term","student"]],["atLeastQ",["minCard",["num",1]],["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]]],["text","It is obligatory that some\tstudents\tare registered for at least one module"]],["rule",["obl",["atMostQ",["maxCard",["num",50]],["var",["num",0],["term","student"]],["atLeastQ",["minCard",["num",1]],["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]]],["text","It is obligatory that at most 50\tstudents are registered for at least one module"]],["rule",["obl",["atLeastQ",["minCard",["num",1]],["var",["num",0],["term","student"]],["atLeastQ",["minCard",["num",1]],["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]]],["text","It is obligatory that at least one\tstudent is registered for at least one module"]],["rule",["obl",["atLeastQ",["minCard",["num",1]],["var",["num",0],["term","student"]],["atLeastQ",["minCard",["num",1]],["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]]],["text","It is obligatory that more than 0\tstudents are registered for at least one module"]],["rule",["obl",["exactQ",["card",["num",1]],["var",["num",0],["term","student"]],["aFrm",["fcTp",["term","student"],["verb","is school president"]],["bind",["term","student"],0]]]],["text","It is obligatory that exactly one\tstudent is school president"]],["rule",["obl",["numRngQ",["minCard",["num",1]],["maxCard",["num",50]],["var",["num",0],["term","student"]],["atLeastQ",["minCard",["num",1]],["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]]],["text","It is obligatory that at least one and at most 50\tstudents are registered for at least one module"]],["rule",["obl",["existQ",["var",["num",0],["term","student"]],["existQ",["var",["num",1],["term","module"]],["existQ",["var",["num",2],["term","lecturer"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"],["verb","with"],["term","lecturer"]],["bind",["term","student"],0],["bind",["term","module"],1],["bind",["term","lecturer"],2]]]]]],["text","It is obligatory that a student is registered for a module with a lecturer"]],["rule",["obl",["existQ",["var",["num",0],["term","student"],["existQ",["var",["num",1],["term","module"],["existQ",["var",["num",2],["term","study programme"]],["aFrm",["fcTp",["term","module"],["verb","is available for"],["term","study programme"]],["bind",["term","module"],1],["bind",["term","study programme"],2]]]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]],["existQ",["var",["num",3],["term","study programme"],["aFrm",["fcTp",["term","module"],["verb","is available for"],["term","study programme"]],["bind",["term","module"],1],["bind",["term","study programme"],3]]],["aFrm",["fcTp",["term","student"],["verb","is enrolled in"],["term","study programme"]],["bind",["term","student"],0],["bind",["term","study programme"],3]]]]],["text","It is obligatory that a student that is registered for a module that is available for a study programme is enrolled in a study programme that the module is available for"]],["rule",["obl",["univQ",["var",["num",0],["term","student"],["existQ",["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]],["existQ",["var",["num",2],["term","study programme"],["aFrm",["fcTp",["term","module"],["verb","is available for"],["term","study programme"]],["bind",["term","module"],1],["bind",["term","study programme"],2]]],["aFrm",["fcTp",["term","student"],["verb","is enrolled in"],["term","study programme"]],["bind",["term","student"],0],["bind",["term","study programme"],2]]]]],["text","It is obligatory that each student that is registered for a module is enrolled in a study programme that the module is available for"]],["rule",["obl",["exactQ",["card",["num",0]],["var",["num",0],["term","person"]],["aFrm",["fcTp",["term","person"],["verb","is swimming"]],["bind",["term","person"],0]]]],["text","It is obligatory that exactly 0 people are swimming"]],["rule",["obl",["univQ",["var",["num",0],["term","student"]],["existQ",["var",["num",1],["term","module"],["existQ",["var",["num",2],["term","study programme"]],["aFrm",["fcTp",["term","module"],["verb","is available for"],["term","study programme"]],["bind",["term","module"],1],["bind",["term","study programme"],2]]]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]]],["text","It is obligatory that each student is registered for a module that is available for a study programme"]],["rule",["obl",["univQ",["var",["num",0],["term","student"],["aFrm",["fcTp",["term","student"],["verb","is school president"]],["bind",["term","student"],0]]],["atLeastQ",["minCard",["num",8]],["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]]],["text","It is obligatory that each student that is school president, is registered for at least 8 modules"]],["rule",["obl",["univQ",["var",["num",0],["term","student"]],["exactQ",["card",["num",1]],["var",["num",1],["term","age"]],["aFrm",["fcTp",["term","student"],["verb","has"],["term","age"]],["bind",["term","student"],0],["bind",["term","age"],1]]]]],["text","It is obligatory that each student has exactly 1 age"]],["rule",["obl",["univQ",["var",["num",0],["term","student"]],["existQ",["var",["num",1],["term","educational institution"]],["aFrm",["fcTp",["term","student"],["verb","is enrolled in"],["term","educational institution"]],["bind",["term","student"],0],["bind",["term","educational institution"],1]]]]],["text","It is obligatory that each student is enrolled in an educational institution"]]]
//["model",["term","integer",[["DatabaseIDField","id"],["DatabaseNameField","name"],["DatabaseTableName","integer"]]],["term","person",[["DatabaseIDField","id"],["DatabaseNameField","name"],["DatabaseTableName","person"]]],["term","age",[["ConceptType",["term","integer"]],["DatabaseIDField","id"],["DatabaseNameField","name"],["DatabaseTableName","age"]]],["fcTp",["term","person"],["verb","has"],["term","age"],[["DatabaseIDField","id"],["DatabaseTableName","person-has-age"]]],["rule",["obl",["neg",["existQ",["var",["num",0],["term","person"]],["neg",["exactQ",["card",["num",1]],["var",["num",1],["term","age"]],["aFrm",["fcTp",["term","person"],["verb","has"],["term","age"]],["bind",["term","person"],0],["bind",["term","age"],1]]]]]]],["text","It is obligatory that each person has exactly one age"]],["term","student",[["ConceptType",["term","person"]],["Definition",["Enum",["Value1","Value2"]]],["Synonym",["term","pupil"]],["DatabaseTableName","student_table"],["DatabaseIDField","id_field"],["DatabaseNameField","name_field"]]],["term","module",[["DatabaseIDField","id"],["DatabaseNameField","name"],["DatabaseTableName","module"]]],["fcTp",["term","student"],["verb","has"],["term","module"],[["DatabaseIDField","id"],["DatabaseTableName","student-has-module"]]],["fcTp",["term","student"],["verb","is registered for"],["term","module"],[["DatabaseIDField","id"],["DatabaseTableName","student-is_registered_for-module"]]],["rule",["obl",["neg",["existQ",["var",["num",0],["term","student"]],["atLeastQ",["minCard",["num",6]],["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]]]],["text","It is obligatory that each student is registered for at most 5 modules"]],["term","study programme",[["DatabaseIDField","id"],["DatabaseNameField","name"],["DatabaseTableName","study_programme"]]],["fcTp",["term","student"],["verb","is enrolled in"],["term","study programme"],[["DatabaseIDField","id"],["DatabaseTableName","student-is_enrolled_in-study_programme"]]],["fcTp",["term","module"],["verb","is available for"],["term","study programme"],[["DatabaseIDField","id"],["DatabaseTableName","module-is_available_for-study_programme"]]],["rule",["obl",["neg",["existQ",["var",["num",0],["term","student"],["existQ",["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]],["neg",["existQ",["var",["num",2],["term","study programme"],["aFrm",["fcTp",["term","module"],["verb","is available for"],["term","study programme"]],["bind",["term","module"],1],["bind",["term","study programme"],2]]],["aFrm",["fcTp",["term","student"],["verb","is enrolled in"],["term","study programme"]],["bind",["term","student"],0],["bind",["term","study programme"],2]]]]]]],["text","It is obligatory that each student that is registered for a module is enrolled in a study programme that the module is available for"]],["term","lecturer",[["ConceptType",["term","person"]],["DatabaseIDField","id"],["DatabaseNameField","name"],["DatabaseTableName","lecturer"]]],["fcTp",["term","student"],["verb","is under probation"],[["DatabaseIDField","id"],["DatabaseTableName","student-is_under_probation"]]],["rule",["obl",["neg",["existQ",["var",["num",0],["term","student"]],["atLeastQ",["minCard",["num",6]],["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]]]],["text","It is obligatory that each student is registered for at most 5 modules"]],["rule",["obl",["neg",["existQ",["var",["num",0],["term","student"],["aFrm",["fcTp",["term","student"],["verb","is under probation"]],["bind",["term","student"],0]]],["atLeastQ",["minCard",["num",4]],["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]]]],["text","It is obligatory that each student that is under probation is registered for at most 3 modules"]],["rule",["obl",["neg",["atLeastQ",["minCard",["num",11]],["var",["num",0],["term","student"]],["aFrm",["fcTp",["term","student"],["verb","is under probation"]],["bind",["term","student"],0]]]]],["text","It is obligatory that at most 10 students are under probation"]],["fcTp",["term","lecturer"],["verb","grades"],["term","student"],["verb","for"],["term","study programme"],["verb","with grade"],[["DatabaseIDField","id"],["DatabaseTableName","lecturer-grades-student-for-study_programme-with_grade"]]],["rule",["obl",["neg",["existQ",["var",["num",0],["term","student"],["aFrm",["fcTp",["term","student"],["verb","is under probation"]],["bind",["term","student"],0]]],["atLeastQ",["minCard",["num",3]],["var",["num",1],["term","study programme"]],["aFrm",["fcTp",["term","student"],["verb","is enrolled in"],["term","study programme"]],["bind",["term","student"],0],["bind",["term","study programme"],1]]]]]],["text","It is prohibited that a student that is under probation is enrolled in more than 2 study programmes"]],["rule",["obl",["neg",["existQ",["var",["num",0],["term","student"]],["existQ",["var",["num",1],["term","module"]],["neg",["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]]]]],["text","It is obligatory that each student is registered for each module"]],["term","educational institution",[["DatabaseIDField","id"],["DatabaseNameField","name"],["DatabaseTableName","educational_institution"]]],["fcTp",["term","person"],["verb","is enrolled in"],["term","educational institution"],[["DatabaseIDField","id"],["DatabaseTableName","person-is_enrolled_in-educational_institution"]]],["fcTp",["term","module"],["verb","is available for"],["term","study programme"],[["DatabaseIDField","id"],["DatabaseTableName","module-is_available_for-study_programme"]]],["fcTp",["term","student"],["verb","is school president"],[["DatabaseTableName","school_president"],["DatabaseIDField","id_field"],["DatabaseNameField","name_field"]]],["fcTp",["term","student"],["verb","is registered for"],["term","module"],[["DatabaseIDField","id"],["DatabaseTableName","student-is_registered_for-module"]]],["fcTp",["term","student"],["verb","is registered for"],["term","module"],["verb","to catchup"],[["DatabaseIDField","id"],["DatabaseTableName","student-is_registered_for-module-to_catchup"]]],["fcTp",["term","student"],["verb","is registered for"],["term","module"],["verb","with"],["term","lecturer"],[["DatabaseIDField","id"],["DatabaseTableName","student-is_registered_for-module-with-lecturer"]]],["fcTp",["term","person"],["verb","is swimming"],[["DatabaseIDField","id"],["DatabaseTableName","person-is_swimming"]]],["fcTp",["term","lecturer"],["verb","is teacher of"],["term","module"],[["DatabaseIDField","id"],["DatabaseTableName","lecturer-is_teacher_of-module"]]],["rule",["obl",["existQ",["var",["num",0],["term","student"]],["aFrm",["fcTp",["term","student"],["verb","is school president"]],["bind",["term","student"],0]]]],["text","It is obligatory that\ta student is school president"]],["rule",["nec",["existQ",["var",["num",0],["term","student"]],["aFrm",["fcTp",["term","student"],["verb","is school president"]],["bind",["term","student"],0]]]],["text","It is necessary that\ta student is school president"]],["rule",["pos",["existQ",["var",["num",0],["term","student"]],["aFrm",["fcTp",["term","student"],["verb","is school president"]],["bind",["term","student"],0]]]],["text","It is possible that\t\ta student is school president"]],["rule",["prm",["existQ",["var",["num",0],["term","student"]],["aFrm",["fcTp",["term","student"],["verb","is school president"]],["bind",["term","student"],0]]]],["text","It is permissible that\ta student is school president"]],["rule",["obl",["neg",["existQ",["var",["num",0],["term","student"]],["aFrm",["fcTp",["term","student"],["verb","is school president"]],["bind",["term","student"],0]]]]],["text","It is prohibited that\tsome students are school president"]],["rule",["nec",["neg",["existQ",["var",["num",0],["term","student"]],["aFrm",["fcTp",["term","student"],["verb","is school president"]],["bind",["term","student"],0]]]]],["text","It is impossible that\tsome students are school president"]],["rule",["nec",["neg",["existQ",["var",["num",0],["term","student"]],["aFrm",["fcTp",["term","student"],["verb","is school president"]],["bind",["term","student"],0]]]]],["text","It is not possible that\tsome students are school president"]],["rule",["obl",["neg",["existQ",["var",["num",0],["term","student"]],["neg",["existQ",["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]]]]],["text","It is obligatory that each\tstudent\t\tis registered for at least one module"]],["rule",["obl",["existQ",["var",["num",0],["term","student"]],["existQ",["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]]],["text","It is obligatory that a\t\tstudent\t\tis registered for at least one module"]],["rule",["obl",["existQ",["var",["num",0],["term","student"]],["existQ",["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]]],["text","It is obligatory that an\tstudent\t\tis registered for at least one module"]],["rule",["obl",["existQ",["var",["num",0],["term","student"]],["existQ",["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]]],["text","It is obligatory that some\tstudents\tare registered for at least one module"]],["rule",["obl",["neg",["atLeastQ",["minCard",["num",51]],["var",["num",0],["term","student"]],["existQ",["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]]]],["text","It is obligatory that at most 50\tstudents are registered for at least one module"]],["rule",["obl",["existQ",["var",["num",0],["term","student"]],["existQ",["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]]],["text","It is obligatory that at least one\tstudent is registered for at least one module"]],["rule",["obl",["existQ",["var",["num",0],["term","student"]],["existQ",["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]]],["text","It is obligatory that more than 0\tstudents are registered for at least one module"]],["rule",["obl",["exactQ",["card",["num",1]],["var",["num",0],["term","student"]],["aFrm",["fcTp",["term","student"],["verb","is school president"]],["bind",["term","student"],0]]]],["text","It is obligatory that exactly one\tstudent is school president"]],["rule",["obl",["numRngQ",["minCard",["num",1]],["maxCard",["num",50]],["var",["num",0],["term","student"]],["existQ",["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]]],["text","It is obligatory that at least one and at most 50\tstudents are registered for at least one module"]],["rule",["obl",["existQ",["var",["num",0],["term","student"]],["existQ",["var",["num",1],["term","module"]],["existQ",["var",["num",2],["term","lecturer"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"],["verb","with"],["term","lecturer"]],["bind",["term","student"],0],["bind",["term","module"],1],["bind",["term","lecturer"],2]]]]]],["text","It is obligatory that a student is registered for a module with a lecturer"]],["rule",["obl",["existQ",["var",["num",0],["term","student"],["existQ",["var",["num",1],["term","module"],["existQ",["var",["num",2],["term","study programme"]],["aFrm",["fcTp",["term","module"],["verb","is available for"],["term","study programme"]],["bind",["term","module"],1],["bind",["term","study programme"],2]]]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]],["existQ",["var",["num",3],["term","study programme"],["aFrm",["fcTp",["term","module"],["verb","is available for"],["term","study programme"]],["bind",["term","module"],1],["bind",["term","study programme"],3]]],["aFrm",["fcTp",["term","student"],["verb","is enrolled in"],["term","study programme"]],["bind",["term","student"],0],["bind",["term","study programme"],3]]]]],["text","It is obligatory that a student that is registered for a module that is available for a study programme is enrolled in a study programme that the module is available for"]],["rule",["obl",["neg",["existQ",["var",["num",0],["term","student"],["existQ",["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]],["neg",["existQ",["var",["num",2],["term","study programme"],["aFrm",["fcTp",["term","module"],["verb","is available for"],["term","study programme"]],["bind",["term","module"],1],["bind",["term","study programme"],2]]],["aFrm",["fcTp",["term","student"],["verb","is enrolled in"],["term","study programme"]],["bind",["term","student"],0],["bind",["term","study programme"],2]]]]]]],["text","It is obligatory that each student that is registered for a module is enrolled in a study programme that the module is available for"]],["rule",["obl",["exactQ",["card",["num",0]],["var",["num",0],["term","person"]],["aFrm",["fcTp",["term","person"],["verb","is swimming"]],["bind",["term","person"],0]]]],["text","It is obligatory that exactly 0 people are swimming"]],["rule",["obl",["neg",["existQ",["var",["num",0],["term","student"]],["neg",["existQ",["var",["num",1],["term","module"],["existQ",["var",["num",2],["term","study programme"]],["aFrm",["fcTp",["term","module"],["verb","is available for"],["term","study programme"]],["bind",["term","module"],1],["bind",["term","study programme"],2]]]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]]]]],["text","It is obligatory that each student is registered for a module that is available for a study programme"]],["rule",["obl",["neg",["existQ",["var",["num",0],["term","student"],["aFrm",["fcTp",["term","student"],["verb","is school president"]],["bind",["term","student"],0]]],["neg",["atLeastQ",["minCard",["num",8]],["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]]]]],["text","It is obligatory that each student that is school president, is registered for at least 8 modules"]],["rule",["obl",["neg",["existQ",["var",["num",0],["term","student"]],["neg",["exactQ",["card",["num",1]],["var",["num",1],["term","age"]],["aFrm",["fcTp",["term","student"],["verb","has"],["term","age"]],["bind",["term","student"],0],["bind",["term","age"],1]]]]]]],["text","It is obligatory that each student has exactly 1 age"]],["rule",["obl",["neg",["existQ",["var",["num",0],["term","student"]],["neg",["existQ",["var",["num",1],["term","educational institution"]],["aFrm",["fcTp",["term","student"],["verb","is enrolled in"],["term","educational institution"]],["bind",["term","student"],0],["bind",["term","educational institution"],1]]]]]]],["text","It is obligatory that each student is enrolled in an educational institution"]]];
//["model",["term","pilot",[]],["term","plane",[]],["fcTp",["term","pilot"],["verb","can fly"],["term","plane"],[]],["fcTp",["term","pilot"],["verb","is experienced"],[]],["rule",["obl",["univQ",["var",["num",0],["term","pilot"]],["atMostQ",["maxCard",["num",1]],["var",["num",1],["term","plane"]],["aFrm",["fcTp",["term","pilot"],["verb","can fly"],["term","plane"]],["bind",["term","pilot"],0],["bind",["term","plane"],1]]]]],["text","It is obligatory that each pilot can fly at most 1 plane"]]]

//Demo:
//["model",["term","student",[]],["fcTp",["term","student"],["verb","is school president"],[]],["rule",["obl",["existQ",["var",["num",0],["term","student"]],["aFrm",["fcTp",["term","student"],["verb","is school president"]],["bind",["term","student"],0]]]],["text","It is obligatory that a student is school president"]],["term","module",[]],["fcTp",["term","student"],["verb","is registered for"],["term","module"],[]],["rule",["obl",["univQ",["var",["num",0],["term","student"]],["atMostQ",["maxCard",["num",5]],["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]]],["text","It is obligatory that each student is registered for at most 5 modules"]],["term","study programme",[]],["fcTp",["term","student"],["verb","is enrolled in"],["term","study programme"],[]],["fcTp",["term","module"],["verb","is available for"],["term","study programme"],[]],["rule",["obl",["univQ",["var",["num",0],["term","student"],["existQ",["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]],["existQ",["var",["num",2],["term","study programme"],["aFrm",["fcTp",["term","module"],["verb","is available for"],["term","study programme"]],["bind",["term","module"],1],["bind",["term","study programme"],2]]],["aFrm",["fcTp",["term","student"],["verb","is enrolled in"],["term","study programme"]],["bind",["term","student"],0],["bind",["term","study programme"],2]]]]],["text","It is obligatory that each student that is registered for a module is enrolled in a study programme that the module is available for"]],["term","lecturer",[]],["fcTp",["term","student"],["verb","is under probation"],[]],["rule",["obl",["univQ",["var",["num",0],["term","student"]],["atMostQ",["maxCard",["num",5]],["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]]],["text","It is obligatory that each student is registered for at most 5 modules"]],["rule",["obl",["univQ",["var",["num",0],["term","student"],["aFrm",["fcTp",["term","student"],["verb","is under probation"]],["bind",["term","student"],0]]],["atMostQ",["maxCard",["num",3]],["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]]],["text","It is obligatory that each student that is under probation is registered for at most 3 modules"]],["rule",["obl",["atMostQ",["maxCard",["num",10]],["var",["num",0],["term","student"]],["aFrm",["fcTp",["term","student"],["verb","is under probation"]],["bind",["term","student"],0]]]],["text","It is obligatory that at most 10 students are under probation"]],["fcTp",["term","lecturer"],["verb","grades"],["term","student"],["verb","for"],["term","study programme"],["verb","with grade"],[]],["rule",["obl",["neg",["existQ",["var",["num",0],["term","student"],["aFrm",["fcTp",["term","student"],["verb","is under probation"]],["bind",["term","student"],0]]],["atLeastQ",["minCard",["num",3]],["var",["num",1],["term","study programme"]],["aFrm",["fcTp",["term","student"],["verb","is enrolled in"],["term","study programme"]],["bind",["term","student"],0],["bind",["term","study programme"],1]]]]]],["text","It is prohibited that a student that is under probation is enrolled in more than 2 study programmes"]],["rule",["obl",["univQ",["var",["num",0],["term","student"]],["univQ",["var",["num",1],["term","module"]],["aFrm",["fcTp",["term","student"],["verb","is registered for"],["term","module"]],["bind",["term","student"],0],["bind",["term","module"],1]]]]],["text","It is obligatory that each student is registered for each module"]],["rule",["obl",["univQ",["var",["num",0],["term","module"]],["exactQ",["card",["num",1]],["var",["num",1],["term","study programme"]],["aFrm",["fcTp",["term","module"],["verb","is available for"],["term","study programme"]],["bind",["term","module"],0],["bind",["term","study programme"],1]]]]],["text","It is obligatory that each module is available for exactly 1 study programme"]]]

//Synonymous Form:
// ["model",["term","species",[]],["term","name",[]],["fcTp",["term","species"],["verb","has"],["term","name"],[["SynonymousForm",[["term","name"],["verb","is of"],["term","species"],[]]]]],["rule",["obl",["univQ",["var",["num",0],["term","name"]],["atMostQ",["maxCard",["num",1]],["var",["num",1],["term","species"]],["aFrm",["fcTp",["term","species"],["verb","has"],["term","name"]],["bind",["term","name"],0],["bind",["term","species"],1]]]]],["text","It is obligatory that each name is of at most 1 species"]]]

//IAH:
["model",["term","Resource",[]],["term","Integer",[]],["term","Long Text",[]],["term","Short Text",[]],["term","species",[]],["term","genus",[]],["fcTp",["term","species"],["verb","belongs to"],["term","genus"],[]],["rule",["obl",["univQ",["var",["num",0],["term","species"]],["exactQ",["card",["num",1]],["var",["num",1],["term","genus"]],["aFrm",["fcTp",["term","species"],["verb","belongs to"],["term","genus"]],["bind",["term","species"],0],["bind",["term","genus"],1]]]]],["text","It is obligatory that each species belongs to exactly 1 genus"]],["term","senior synonym",[["ConceptType",["term","Short Text"]]]],["term","notes",[["ConceptType",["term","Long Text"]]]],["term","habitat",[["ConceptType",["term","Long Text"]]]],["fcTp",["term","species"],["verb","has"],["term","notes"],[]],["fcTp",["term","species"],["verb","has"],["term","habitat"],[]],["fcTp",["term","species"],["verb","has"],["term","senior synonym"],[]],["term","name",[["ConceptType",["term","Short Text"]]]],["fcTp",["term","species"],["verb","has"],["term","name"],[]],["rule",["obl",["univQ",["var",["num",0],["term","species"]],["exactQ",["card",["num",1]],["var",["num",1],["term","senior synonym"]],["aFrm",["fcTp",["term","species"],["verb","has"],["term","senior synonym"]],["bind",["term","species"],0],["bind",["term","senior synonym"],1]]]]],["text","It is obligatory that each species has exactly 1 senior synonym"]],["rule",["obl",["univQ",["var",["num",0],["term","name"]],["atMostQ",["maxCard",["num",1]],["var",["num",1],["term","species"]],["aFrm",["fcTp",["term","name"],["verb","is of"],["term","species"]],["bind",["term","name"],0],["bind",["term","species"],1]]]]],["text","It is obligatory that each name is of at most 1 species"]],["fcTp",["term","genus"],["verb","has"],["term","name"],[]],["rule",["obl",["univQ",["var",["num",0],["term","genus"]],["exactQ",["card",["num",1]],["var",["num",1],["term","name"]],["aFrm",["fcTp",["term","genus"],["verb","has"],["term","name"]],["bind",["term","genus"],0],["bind",["term","name"],1]]]]],["text","It is obligatory that each genus has exactly 1 name"]],["rule",["obl",["univQ",["var",["num",0],["term","name"]],["atMostQ",["maxCard",["num",1]],["var",["num",1],["term","genus"]],["aFrm",["fcTp",["term","name"],["verb","is of"],["term","genus"]],["bind",["term","name"],0],["bind",["term","genus"],1]]]]],["text","It is obligatory that each name is of at most 1 genus"]],["term","image",[]],["fcTp",["term","species"],["verb","is documented in"],["term","image"],[]],["term","type",[["Definition",["Enum",["wing","other"]]]]],["fcTp",["term","image"],["verb","has"],["term","type"],[]],["rule",["obl",["univQ",["var",["num",0],["term","image"]],["exactQ",["card",["num",1]],["var",["num",1],["term","type"]],["aFrm",["fcTp",["term","image"],["verb","has"],["term","type"]],["bind",["term","image"],0],["bind",["term","type"],1]]]]],["text","It is obligatory that each image has exactly 1 type"]],["term","publication",[]],["term","author",[]],["term","year",[["ConceptType",["term","Integer"]]]],["fcTp",["term","publication"],["verb","has"],["term","author"],[]],["fcTp",["term","publication"],["verb","was in"],["term","year"],[]],["term","DOI",[]],["fcTp",["term","publication"],["verb","has"],["term","DOI"],[]],["fcTp",["term","publication"],["verb","is in library"],[]],["term","pathogen",[]],["fcTp",["term","species"],["verb","is vector for"],["term","pathogen"],[["TermForm",["term","vector relationship"]]]],["fcTp",["term","vector relationship"],["verb","is documented in"],["term","publication"],[]],["term","host",[]],["fcTp",["term","species"],["verb","feeds on"],["term","host"],[["TermForm",["term","feeding relationship"]]]],["fcTp",["term","feeding relationship"],["verb","is documented in"],["term","publication"],[]],["term","region",[]],["fcTp",["term","species"],["verb","lives in"],["term","region"],[["TermForm",["term","species residence"]]]],["fcTp",["term","species residence"],["verb","is documented in"],["term","publication"],[]],["term","description",[]],["fcTp",["term","species"],["verb","has"],["term","description"],[]],["fcTp",["term","description"],["verb","assigns"],["term","name"],[]],["fcTp",["term","publication"],["verb","makes"],["term","description"],[]],["fcTp",["term","description"],["verb","is within"],["term","genus"],[]],["fcTp",["term","description"],["verb","was first made in"],["term","publication"],[]]]

//Term Form Rule:
// ["model",["term","species",[]],["term","publication",[]],["term","region",[]],["fcTp",["term","species"],["verb","lives in"],["term","region"],[["TermForm",["term","species residence"]]]],["fcTp",["term","species residence"],["verb","is documented in"],["term","publication"],[]],["rule",["obl",["univQ",["var",["num",0],["term","species residence"]],["exactQ",["card",["num",1]],["var",["num",1],["term","publication"]],["aFrm",["fcTp",["term","species residence"],["verb","is documented in"],["term","publication"]],["bind",["term","species residence"],0],["bind",["term","publication"],1]]]]],["text","It is obligatory that each species residence is documented in exactly 1 publication"]]]



instance = LF2AbstractSQLPrep.createInstance();
try {
	console.log('Part 1: Prepare LF');
	result = instance.match(
		model
		, 'Process'
	);
	// prettify('result', result)
	// console.log(Prettify.match(result, 'Process'));

	instance = LF2AbstractSQL.createInstance();
	console.log('Part 2: Generate abstract');
	result = instance.match(
		result
		, 'Process'
	);
	// prettify('result', result);
	// console.log(Prettify.match(result.rules, 'Process'));
	
	// console.log(_.isEqual(model, result));
	
	// console.log('Part 3: Optimise');
	// for(var i=0;i<result.rules.length;i++) {
		// instance = AbstractSQLOptimiser.createInstance();
		// // console.log(result.rules[i][1][1]);
		// // console.log(Prettify.match(result.rules[i][2][1], 'Process'));
		// result.rules[i][2][1] = instance.match(
			// result.rules[i][2][1]
			// , 'Process'
		// );
		// // console.log(Prettify.match(result.rules[i][2][1], 'Process'));
		
		// // console.log(
			// // AbstractSQLRules2SQL.match(
				// // result.rules[i][2][1]
				// // , 'Process'
			// // )
		// // );
		
	// }
	
	try {
		console.log('Part 4: Generate SQL');
		result = AbstractSQL2SQL(result);
		// console.log(prettify('result', result));
	}
	catch(e) {
		console.log(e)
		console.log(e.stack)
	}
}
catch(e) {
	console.log(e.stack)
	console.log(instance.input);
	console.log(Prettify.match(instance.input.hd, 'Process'));
	// console.log(instance.tables, instance.terms, instance.conceptTypes, instance.rules);
}