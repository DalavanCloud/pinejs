// Term:      integer
// Term:      person
// Term:      age
	// Concept Type: integer
// Fact type: person has age
// Rule:      It is obligatory that each person has exactly one age
// Term:      student
  // Concept Type: person
	// Definition: Value1 or Value2
	// Synonym: pupil
	// Database Table Name: student_table
	// Database ID Field: id_field
	// Database Name Field: name_field
// Term:      module
// Fact type: student has module
// Fact type: student is registered for module
// Rule:      It is obligatory that each student is registered for at most 5 modules
// Term:      study programme
// Fact type: pupil is enrolled in study programme
// Fact type: module is available for study programme
// Rule:      It is obligatory that each student that is registered for a module is enrolled in a study programme that the module is available for
// Term:      lecturer
	// Concept Type: person
// Fact type: student is under probation
// Rule:      It is obligatory that each student is registered for at most 5 modules
// Rule:      It is obligatory that each student that is under probation is registered for at most 3 modules
// Rule:      It is obligatory that at most 10 students are under probation
// Fact type: lecturer grades student for study programme with grade
// Rule:      It is prohibited that a student that is under probation is enrolled in more than 2 study programmes
// Rule:      It is obligatory that each student is registered for each module

// T: educational institution
// --Test comment
// --Test comment Term: With ignored term
// F: person is enrolled in educational institution
// F: module is available for study programme
// F: student is school president 
	// Database Table Name: school_president
	// Database ID Field: id_field
	// Database Name Field: name_field
// F: student is registered for module
// F: student is registered for module to catchup
// F: student is registered for module with lecturer
// F: person is swimming
// F: lecturer is teacher of module 
// R: It is obligatory that	a student is school president
// R: It is necessary that	a student is school president
// R: It is possible that		a student is school president
// R: It is permissible that	a student is school president
// R: It is prohibited that	some students are school president
// R: It is impossible that	some students are school president
// R: It is not possible that	some students are school president
// R: It is obligatory that each	student		is registered for at least one module
// R: It is obligatory that a		student		is registered for at least one module
// R: It is obligatory that an	student		is registered for at least one module
// R: It is obligatory that some	students	are registered for at least one module
// R: It is obligatory that at most 50	students are registered for at least one module
// R: It is obligatory that at least one	student is registered for at least one module
// R: It is obligatory that more than 0	students are registered for at least one module
// R: It is obligatory that exactly one	student is school president
// R: It is obligatory that at least one and at most 50	students are registered for at least one module
// R: It is obligatory that a student is registered for a module with a lecturer
// R: It is obligatory that a student that is registered for a module that is available for a study programme is enrolled in a study programme that the module is available for
// R: It is obligatory that each student that is registered for a module is enrolled in a study programme that the module is available for
// R: It is obligatory that exactly 0 people are swimming
// R: It is obligatory that each student is registered for a module that is available for a study programme
// R: It is obligatory that each student that is school president, is registered for at least 8 modules
// R: It is obligatory that each student has exactly 1 age
// R: It is obligatory that each student is enrolled in an educational institution




// Term:      integer
// Term:      person
// Term:      age
	// Concept Type: integer
// Fact type: person has age
// Rule:      It is obligatory that each person has exactly one age
// Term:      student
  // Concept Type: person
// Fact type: student is school president
// Rule:      It is obligatory that a student is school president
// Term:      module
// Fact type: student has module
// Fact type: student is registered for module
// Rule:      It is obligatory that each student is registered for at most 5 modules
// Term:      study programme
// Fact type: student is enrolled in study programme
// Fact type: module is available for study programme
// Rule:      It is obligatory that each student that is registered for a module is enrolled in a study programme that the module is available for
// Term:      lecturer
// Fact type: student is under probation
// Rule:      It is obligatory that each student is registered for at most 5 modules
// Rule:      It is obligatory that each student that is under probation is registered for at most 3 modules
// Rule:      It is obligatory that at most 10 students are under probation
// Fact type: lecturer grades student for study programme with grade
// Rule:      It is prohibited that a student that is under probation is enrolled in more than 2 study programmes
// Rule:      It is obligatory that each student is registered for each module


// require(['sbvr-parser/SBVRParser', 'sbvr-compiler/LF2AbstractSQLPrep', 'Prettify'], function(SBVRParser, LF2AbstractSQLPrep, Prettify) {
	// console.log(Prettify.match(LF2AbstractSQLPrep.match(SBVRParser.matchAll(sbvrEditor.getValue(),'expr'),'Process'), 'Process'))
// });

// require(['sbvr-parser/SBVRParser', 'sbvr-compiler/LF2AbstractSQLPrep'], function(SBVRParser, LF2AbstractSQLPrep) {
	// console.log(JSON.stringify(LF2AbstractSQLPrep.match(SBVRParser.matchAll(sbvrEditor.getValue(),'expr'),'Process')))
// });

// require(['sbvr-parser/SBVRParser', 'sbvr-compiler/LF2AbstractSQLPrep'], function(SBVRParser, LF2AbstractSQLPrep) {
	// console.log(JSON.stringify(SBVRParser.matchAll(sbvrEditor.getValue(),'expr'),'Process'))
// });

// require(['sbvr-parser/SBVRParser', 'sbvr-compiler/LF2AbstractSQLPrep', 'Prettify', 'LF2AbstractSQL'], function(SBVRParser, LF2AbstractSQLPrep, Prettify, LF2AbstractSQL) {
	// console.log(Prettify.match(LF2AbstractSQL.match(LF2AbstractSQLPrep.match(SBVRParser.matchAll(sbvrEditor.getValue(),'expr'),'Process'), 'Process'), 'Process'))
// });

var prettify = function(key, value) {
	var uglifyjs = require('uglify-js');
	var stringy = 'var ' + key + ' = ' + JSON.stringify(value);
	var ast = uglifyjs.parser.parse(stringy);
	console.log(uglifyjs.uglify.gen_code(ast, {beautify: true}));
}

requirejs = require('requirejs');
requirejs.config({
	paths: {
		'ometa': '../../../external/ometa-js',
		'underscore': '../../../external/underscore-1.2.1.min',
		'Prettify': '../../../client/prettify-ometa/src/Prettify',
		'sbvr-compiler': '../src/',
		'sbvr-parser': '../../../common/sbvr-parser/src/'
	}
});

LF2AbstractSQLPrep = requirejs('sbvr-compiler/LF2AbstractSQLPrep');
LF2AbstractSQL = requirejs('../src/LF2AbstractSQL.js');
AbstractSQLOptimiser = requirejs('../src/AbstractSQLOptimiser.js');
Prettify = requirejs('Prettify');
AbstractSQL2SQL = requirejs('../src/AbstractSQL2SQL.js').postgres;
AbstractSQLRules2SQL = requirejs('../src/AbstractSQLRules2SQL.js');
_ = requirejs('underscore');

// result = AbstractSQLOptimiser.match(
	// [	'Not',
		// [	'Not',
			// [	'Equals',
				// [	'Number',
					// 1
				// ],
				// [	'Number',
					// 1
				// ]
			// ]
		// ]
	// ]
	// , 'Process'
// );
// console.log(Prettify.match(result, 'Process'));


var model = //["Model",["Term","integer",[]],["Term","person",[]],["Term","age",[["ConceptType",["Term","integer"]]]],["FactType",["Term","person"],["Verb","has"],["Term","age"],[]],["Rule",["ObligationF",["UniversalQ",["Variable",["Number",0],["Term","person"]],["ExactQ",["Cardinality",["Number",1]],["Variable",["Number",1],["Term","age"]],["AtomicFormulation",["FactType",["Term","person"],["Verb","has"],["Term","age"]],["RoleBinding",["Term","person"],0],["RoleBinding",["Term","age"],1]]]]],["StructuredEnglish","It is obligatory that each person has exactly one age"]],["Term","student",[["ConceptType",["Term","person"]],["Definition",["Enum",["Value1","Value2"]]],["Synonym",["Term","pupil"]],["DatabaseTableName","student_table"],["DatabaseIDField","id_field"],["DatabaseNameField","name_field"]]],["Term","module",[]],["FactType",["Term","student"],["Verb","has"],["Term","module"],[]],["FactType",["Term","student"],["Verb","is registered for"],["Term","module"],[]],["Rule",["ObligationF",["UniversalQ",["Variable",["Number",0],["Term","student"]],["AtMostNQ",["MaximumCardinality",["Number",5]],["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]]],["StructuredEnglish","It is obligatory that each student is registered for at most 5 modules"]],["Term","study programme",[]],["FactType",["Term","student"],["Verb","is enrolled in"],["Term","study programme"],[]],["FactType",["Term","module"],["Verb","is available for"],["Term","study programme"],[]],["Rule",["ObligationF",["UniversalQ",["Variable",["Number",0],["Term","student"],["ExistentialQ",["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]],["ExistentialQ",["Variable",["Number",2],["Term","study programme"],["AtomicFormulation",["FactType",["Term","module"],["Verb","is available for"],["Term","study programme"]],["RoleBinding",["Term","module"],1],["RoleBinding",["Term","study programme"],2]]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is enrolled in"],["Term","study programme"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","study programme"],2]]]]],["StructuredEnglish","It is obligatory that each student that is registered for a module is enrolled in a study programme that the module is available for"]],["Term","lecturer",[["ConceptType",["Term","person"]]]],["FactType",["Term","student"],["Verb","is under probation"],[]],["Rule",["ObligationF",["UniversalQ",["Variable",["Number",0],["Term","student"]],["AtMostNQ",["MaximumCardinality",["Number",5]],["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]]],["StructuredEnglish","It is obligatory that each student is registered for at most 5 modules"]],["Rule",["ObligationF",["UniversalQ",["Variable",["Number",0],["Term","student"],["AtomicFormulation",["FactType",["Term","student"],["Verb","is under probation"]],["RoleBinding",["Term","student"],0]]],["AtMostNQ",["MaximumCardinality",["Number",3]],["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]]],["StructuredEnglish","It is obligatory that each student that is under probation is registered for at most 3 modules"]],["Rule",["ObligationF",["AtMostNQ",["MaximumCardinality",["Number",10]],["Variable",["Number",0],["Term","student"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is under probation"]],["RoleBinding",["Term","student"],0]]]],["StructuredEnglish","It is obligatory that at most 10 students are under probation"]],["FactType",["Term","lecturer"],["Verb","grades"],["Term","student"],["Verb","for"],["Term","study programme"],["Verb","with grade"],[]],["Rule",["ObligationF",["LogicalNegation",["ExistentialQ",["Variable",["Number",0],["Term","student"],["AtomicFormulation",["FactType",["Term","student"],["Verb","is under probation"]],["RoleBinding",["Term","student"],0]]],["AtLeastNQ",["MinimumCardinality",["Number",3]],["Variable",["Number",1],["Term","study programme"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is enrolled in"],["Term","study programme"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","study programme"],1]]]]]],["StructuredEnglish","It is prohibited that a student that is under probation is enrolled in more than 2 study programmes"]],["Rule",["ObligationF",["UniversalQ",["Variable",["Number",0],["Term","student"]],["UniversalQ",["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]]],["StructuredEnglish","It is obligatory that each student is registered for each module"]],["Term","educational institution",[]],["FactType",["Term","person"],["Verb","is enrolled in"],["Term","educational institution"],[]],["FactType",["Term","module"],["Verb","is available for"],["Term","study programme"],[]],["FactType",["Term","student"],["Verb","is school president"],[["DatabaseTableName","school_president"],["DatabaseIDField","id_field"],["DatabaseNameField","name_field"]]],["FactType",["Term","student"],["Verb","is registered for"],["Term","module"],[]],["FactType",["Term","student"],["Verb","is registered for"],["Term","module"],["Verb","to catchup"],[]],["FactType",["Term","student"],["Verb","is registered for"],["Term","module"],["Verb","with"],["Term","lecturer"],[]],["FactType",["Term","person"],["Verb","is swimming"],[]],["FactType",["Term","lecturer"],["Verb","is teacher of"],["Term","module"],[]],["Rule",["ObligationF",["ExistentialQ",["Variable",["Number",0],["Term","student"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is school president"]],["RoleBinding",["Term","student"],0]]]],["StructuredEnglish","It is obligatory that\ta student is school president"]],["Rule",["NecessityF",["ExistentialQ",["Variable",["Number",0],["Term","student"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is school president"]],["RoleBinding",["Term","student"],0]]]],["StructuredEnglish","It is necessary that\ta student is school president"]],["Rule",["PossibilityF",["ExistentialQ",["Variable",["Number",0],["Term","student"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is school president"]],["RoleBinding",["Term","student"],0]]]],["StructuredEnglish","It is possible that\t\ta student is school president"]],["Rule",["PermissibilityF",["ExistentialQ",["Variable",["Number",0],["Term","student"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is school president"]],["RoleBinding",["Term","student"],0]]]],["StructuredEnglish","It is permissible that\ta student is school president"]],["Rule",["ObligationF",["LogicalNegation",["ExistentialQ",["Variable",["Number",0],["Term","student"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is school president"]],["RoleBinding",["Term","student"],0]]]]],["StructuredEnglish","It is prohibited that\tsome students are school president"]],["Rule",["NecessityF",["LogicalNegation",["ExistentialQ",["Variable",["Number",0],["Term","student"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is school president"]],["RoleBinding",["Term","student"],0]]]]],["StructuredEnglish","It is impossible that\tsome students are school president"]],["Rule",["NecessityF",["LogicalNegation",["ExistentialQ",["Variable",["Number",0],["Term","student"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is school president"]],["RoleBinding",["Term","student"],0]]]]],["StructuredEnglish","It is not possible that\tsome students are school president"]],["Rule",["ObligationF",["UniversalQ",["Variable",["Number",0],["Term","student"]],["AtLeastNQ",["MinimumCardinality",["Number",1]],["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]]],["StructuredEnglish","It is obligatory that each\tstudent\t\tis registered for at least one module"]],["Rule",["ObligationF",["ExistentialQ",["Variable",["Number",0],["Term","student"]],["AtLeastNQ",["MinimumCardinality",["Number",1]],["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]]],["StructuredEnglish","It is obligatory that a\t\tstudent\t\tis registered for at least one module"]],["Rule",["ObligationF",["ExistentialQ",["Variable",["Number",0],["Term","student"]],["AtLeastNQ",["MinimumCardinality",["Number",1]],["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]]],["StructuredEnglish","It is obligatory that an\tstudent\t\tis registered for at least one module"]],["Rule",["ObligationF",["ExistentialQ",["Variable",["Number",0],["Term","student"]],["AtLeastNQ",["MinimumCardinality",["Number",1]],["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]]],["StructuredEnglish","It is obligatory that some\tstudents\tare registered for at least one module"]],["Rule",["ObligationF",["AtMostNQ",["MaximumCardinality",["Number",50]],["Variable",["Number",0],["Term","student"]],["AtLeastNQ",["MinimumCardinality",["Number",1]],["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]]],["StructuredEnglish","It is obligatory that at most 50\tstudents are registered for at least one module"]],["Rule",["ObligationF",["AtLeastNQ",["MinimumCardinality",["Number",1]],["Variable",["Number",0],["Term","student"]],["AtLeastNQ",["MinimumCardinality",["Number",1]],["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]]],["StructuredEnglish","It is obligatory that at least one\tstudent is registered for at least one module"]],["Rule",["ObligationF",["AtLeastNQ",["MinimumCardinality",["Number",1]],["Variable",["Number",0],["Term","student"]],["AtLeastNQ",["MinimumCardinality",["Number",1]],["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]]],["StructuredEnglish","It is obligatory that more than 0\tstudents are registered for at least one module"]],["Rule",["ObligationF",["ExactQ",["Cardinality",["Number",1]],["Variable",["Number",0],["Term","student"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is school president"]],["RoleBinding",["Term","student"],0]]]],["StructuredEnglish","It is obligatory that exactly one\tstudent is school president"]],["Rule",["ObligationF",["NumericalRangeQ",["MinimumCardinality",["Number",1]],["MaximumCardinality",["Number",50]],["Variable",["Number",0],["Term","student"]],["AtLeastNQ",["MinimumCardinality",["Number",1]],["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]]],["StructuredEnglish","It is obligatory that at least one and at most 50\tstudents are registered for at least one module"]],["Rule",["ObligationF",["ExistentialQ",["Variable",["Number",0],["Term","student"]],["ExistentialQ",["Variable",["Number",1],["Term","module"]],["ExistentialQ",["Variable",["Number",2],["Term","lecturer"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"],["Verb","with"],["Term","lecturer"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1],["RoleBinding",["Term","lecturer"],2]]]]]],["StructuredEnglish","It is obligatory that a student is registered for a module with a lecturer"]],["Rule",["ObligationF",["ExistentialQ",["Variable",["Number",0],["Term","student"],["ExistentialQ",["Variable",["Number",1],["Term","module"],["ExistentialQ",["Variable",["Number",2],["Term","study programme"]],["AtomicFormulation",["FactType",["Term","module"],["Verb","is available for"],["Term","study programme"]],["RoleBinding",["Term","module"],1],["RoleBinding",["Term","study programme"],2]]]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]],["ExistentialQ",["Variable",["Number",3],["Term","study programme"],["AtomicFormulation",["FactType",["Term","module"],["Verb","is available for"],["Term","study programme"]],["RoleBinding",["Term","module"],1],["RoleBinding",["Term","study programme"],3]]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is enrolled in"],["Term","study programme"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","study programme"],3]]]]],["StructuredEnglish","It is obligatory that a student that is registered for a module that is available for a study programme is enrolled in a study programme that the module is available for"]],["Rule",["ObligationF",["UniversalQ",["Variable",["Number",0],["Term","student"],["ExistentialQ",["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]],["ExistentialQ",["Variable",["Number",2],["Term","study programme"],["AtomicFormulation",["FactType",["Term","module"],["Verb","is available for"],["Term","study programme"]],["RoleBinding",["Term","module"],1],["RoleBinding",["Term","study programme"],2]]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is enrolled in"],["Term","study programme"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","study programme"],2]]]]],["StructuredEnglish","It is obligatory that each student that is registered for a module is enrolled in a study programme that the module is available for"]],["Rule",["ObligationF",["ExactQ",["Cardinality",["Number",0]],["Variable",["Number",0],["Term","person"]],["AtomicFormulation",["FactType",["Term","person"],["Verb","is swimming"]],["RoleBinding",["Term","person"],0]]]],["StructuredEnglish","It is obligatory that exactly 0 people are swimming"]],["Rule",["ObligationF",["UniversalQ",["Variable",["Number",0],["Term","student"]],["ExistentialQ",["Variable",["Number",1],["Term","module"],["ExistentialQ",["Variable",["Number",2],["Term","study programme"]],["AtomicFormulation",["FactType",["Term","module"],["Verb","is available for"],["Term","study programme"]],["RoleBinding",["Term","module"],1],["RoleBinding",["Term","study programme"],2]]]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]]],["StructuredEnglish","It is obligatory that each student is registered for a module that is available for a study programme"]],["Rule",["ObligationF",["UniversalQ",["Variable",["Number",0],["Term","student"],["AtomicFormulation",["FactType",["Term","student"],["Verb","is school president"]],["RoleBinding",["Term","student"],0]]],["AtLeastNQ",["MinimumCardinality",["Number",8]],["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]]],["StructuredEnglish","It is obligatory that each student that is school president, is registered for at least 8 modules"]],["Rule",["ObligationF",["UniversalQ",["Variable",["Number",0],["Term","student"]],["ExactQ",["Cardinality",["Number",1]],["Variable",["Number",1],["Term","age"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","has"],["Term","age"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","age"],1]]]]],["StructuredEnglish","It is obligatory that each student has exactly 1 age"]],["Rule",["ObligationF",["UniversalQ",["Variable",["Number",0],["Term","student"]],["ExistentialQ",["Variable",["Number",1],["Term","educational institution"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is enrolled in"],["Term","educational institution"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","educational institution"],1]]]]],["StructuredEnglish","It is obligatory that each student is enrolled in an educational institution"]]]
//["Model",["Term","integer",[["DatabaseIDField","id"],["DatabaseNameField","name"],["DatabaseTableName","integer"]]],["Term","person",[["DatabaseIDField","id"],["DatabaseNameField","name"],["DatabaseTableName","person"]]],["Term","age",[["ConceptType",["Term","integer"]],["DatabaseIDField","id"],["DatabaseNameField","name"],["DatabaseTableName","age"]]],["FactType",["Term","person"],["Verb","has"],["Term","age"],[["DatabaseIDField","id"],["DatabaseTableName","person-has-age"]]],["Rule",["ObligationF",["LogicalNegation",["ExistentialQ",["Variable",["Number",0],["Term","person"]],["LogicalNegation",["ExactQ",["Cardinality",["Number",1]],["Variable",["Number",1],["Term","age"]],["AtomicFormulation",["FactType",["Term","person"],["Verb","has"],["Term","age"]],["RoleBinding",["Term","person"],0],["RoleBinding",["Term","age"],1]]]]]]],["StructuredEnglish","It is obligatory that each person has exactly one age"]],["Term","student",[["ConceptType",["Term","person"]],["Definition",["Enum",["Value1","Value2"]]],["Synonym",["Term","pupil"]],["DatabaseTableName","student_table"],["DatabaseIDField","id_field"],["DatabaseNameField","name_field"]]],["Term","module",[["DatabaseIDField","id"],["DatabaseNameField","name"],["DatabaseTableName","module"]]],["FactType",["Term","student"],["Verb","has"],["Term","module"],[["DatabaseIDField","id"],["DatabaseTableName","student-has-module"]]],["FactType",["Term","student"],["Verb","is registered for"],["Term","module"],[["DatabaseIDField","id"],["DatabaseTableName","student-is_registered_for-module"]]],["Rule",["ObligationF",["LogicalNegation",["ExistentialQ",["Variable",["Number",0],["Term","student"]],["AtLeastNQ",["MinimumCardinality",["Number",6]],["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]]]],["StructuredEnglish","It is obligatory that each student is registered for at most 5 modules"]],["Term","study programme",[["DatabaseIDField","id"],["DatabaseNameField","name"],["DatabaseTableName","study_programme"]]],["FactType",["Term","student"],["Verb","is enrolled in"],["Term","study programme"],[["DatabaseIDField","id"],["DatabaseTableName","student-is_enrolled_in-study_programme"]]],["FactType",["Term","module"],["Verb","is available for"],["Term","study programme"],[["DatabaseIDField","id"],["DatabaseTableName","module-is_available_for-study_programme"]]],["Rule",["ObligationF",["LogicalNegation",["ExistentialQ",["Variable",["Number",0],["Term","student"],["ExistentialQ",["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]],["LogicalNegation",["ExistentialQ",["Variable",["Number",2],["Term","study programme"],["AtomicFormulation",["FactType",["Term","module"],["Verb","is available for"],["Term","study programme"]],["RoleBinding",["Term","module"],1],["RoleBinding",["Term","study programme"],2]]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is enrolled in"],["Term","study programme"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","study programme"],2]]]]]]],["StructuredEnglish","It is obligatory that each student that is registered for a module is enrolled in a study programme that the module is available for"]],["Term","lecturer",[["ConceptType",["Term","person"]],["DatabaseIDField","id"],["DatabaseNameField","name"],["DatabaseTableName","lecturer"]]],["FactType",["Term","student"],["Verb","is under probation"],[["DatabaseIDField","id"],["DatabaseTableName","student-is_under_probation"]]],["Rule",["ObligationF",["LogicalNegation",["ExistentialQ",["Variable",["Number",0],["Term","student"]],["AtLeastNQ",["MinimumCardinality",["Number",6]],["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]]]],["StructuredEnglish","It is obligatory that each student is registered for at most 5 modules"]],["Rule",["ObligationF",["LogicalNegation",["ExistentialQ",["Variable",["Number",0],["Term","student"],["AtomicFormulation",["FactType",["Term","student"],["Verb","is under probation"]],["RoleBinding",["Term","student"],0]]],["AtLeastNQ",["MinimumCardinality",["Number",4]],["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]]]],["StructuredEnglish","It is obligatory that each student that is under probation is registered for at most 3 modules"]],["Rule",["ObligationF",["LogicalNegation",["AtLeastNQ",["MinimumCardinality",["Number",11]],["Variable",["Number",0],["Term","student"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is under probation"]],["RoleBinding",["Term","student"],0]]]]],["StructuredEnglish","It is obligatory that at most 10 students are under probation"]],["FactType",["Term","lecturer"],["Verb","grades"],["Term","student"],["Verb","for"],["Term","study programme"],["Verb","with grade"],[["DatabaseIDField","id"],["DatabaseTableName","lecturer-grades-student-for-study_programme-with_grade"]]],["Rule",["ObligationF",["LogicalNegation",["ExistentialQ",["Variable",["Number",0],["Term","student"],["AtomicFormulation",["FactType",["Term","student"],["Verb","is under probation"]],["RoleBinding",["Term","student"],0]]],["AtLeastNQ",["MinimumCardinality",["Number",3]],["Variable",["Number",1],["Term","study programme"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is enrolled in"],["Term","study programme"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","study programme"],1]]]]]],["StructuredEnglish","It is prohibited that a student that is under probation is enrolled in more than 2 study programmes"]],["Rule",["ObligationF",["LogicalNegation",["ExistentialQ",["Variable",["Number",0],["Term","student"]],["ExistentialQ",["Variable",["Number",1],["Term","module"]],["LogicalNegation",["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]]]]],["StructuredEnglish","It is obligatory that each student is registered for each module"]],["Term","educational institution",[["DatabaseIDField","id"],["DatabaseNameField","name"],["DatabaseTableName","educational_institution"]]],["FactType",["Term","person"],["Verb","is enrolled in"],["Term","educational institution"],[["DatabaseIDField","id"],["DatabaseTableName","person-is_enrolled_in-educational_institution"]]],["FactType",["Term","module"],["Verb","is available for"],["Term","study programme"],[["DatabaseIDField","id"],["DatabaseTableName","module-is_available_for-study_programme"]]],["FactType",["Term","student"],["Verb","is school president"],[["DatabaseTableName","school_president"],["DatabaseIDField","id_field"],["DatabaseNameField","name_field"]]],["FactType",["Term","student"],["Verb","is registered for"],["Term","module"],[["DatabaseIDField","id"],["DatabaseTableName","student-is_registered_for-module"]]],["FactType",["Term","student"],["Verb","is registered for"],["Term","module"],["Verb","to catchup"],[["DatabaseIDField","id"],["DatabaseTableName","student-is_registered_for-module-to_catchup"]]],["FactType",["Term","student"],["Verb","is registered for"],["Term","module"],["Verb","with"],["Term","lecturer"],[["DatabaseIDField","id"],["DatabaseTableName","student-is_registered_for-module-with-lecturer"]]],["FactType",["Term","person"],["Verb","is swimming"],[["DatabaseIDField","id"],["DatabaseTableName","person-is_swimming"]]],["FactType",["Term","lecturer"],["Verb","is teacher of"],["Term","module"],[["DatabaseIDField","id"],["DatabaseTableName","lecturer-is_teacher_of-module"]]],["Rule",["ObligationF",["ExistentialQ",["Variable",["Number",0],["Term","student"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is school president"]],["RoleBinding",["Term","student"],0]]]],["StructuredEnglish","It is obligatory that\ta student is school president"]],["Rule",["NecessityF",["ExistentialQ",["Variable",["Number",0],["Term","student"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is school president"]],["RoleBinding",["Term","student"],0]]]],["StructuredEnglish","It is necessary that\ta student is school president"]],["Rule",["PossibilityF",["ExistentialQ",["Variable",["Number",0],["Term","student"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is school president"]],["RoleBinding",["Term","student"],0]]]],["StructuredEnglish","It is possible that\t\ta student is school president"]],["Rule",["PermissibilityF",["ExistentialQ",["Variable",["Number",0],["Term","student"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is school president"]],["RoleBinding",["Term","student"],0]]]],["StructuredEnglish","It is permissible that\ta student is school president"]],["Rule",["ObligationF",["LogicalNegation",["ExistentialQ",["Variable",["Number",0],["Term","student"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is school president"]],["RoleBinding",["Term","student"],0]]]]],["StructuredEnglish","It is prohibited that\tsome students are school president"]],["Rule",["NecessityF",["LogicalNegation",["ExistentialQ",["Variable",["Number",0],["Term","student"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is school president"]],["RoleBinding",["Term","student"],0]]]]],["StructuredEnglish","It is impossible that\tsome students are school president"]],["Rule",["NecessityF",["LogicalNegation",["ExistentialQ",["Variable",["Number",0],["Term","student"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is school president"]],["RoleBinding",["Term","student"],0]]]]],["StructuredEnglish","It is not possible that\tsome students are school president"]],["Rule",["ObligationF",["LogicalNegation",["ExistentialQ",["Variable",["Number",0],["Term","student"]],["LogicalNegation",["ExistentialQ",["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]]]]],["StructuredEnglish","It is obligatory that each\tstudent\t\tis registered for at least one module"]],["Rule",["ObligationF",["ExistentialQ",["Variable",["Number",0],["Term","student"]],["ExistentialQ",["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]]],["StructuredEnglish","It is obligatory that a\t\tstudent\t\tis registered for at least one module"]],["Rule",["ObligationF",["ExistentialQ",["Variable",["Number",0],["Term","student"]],["ExistentialQ",["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]]],["StructuredEnglish","It is obligatory that an\tstudent\t\tis registered for at least one module"]],["Rule",["ObligationF",["ExistentialQ",["Variable",["Number",0],["Term","student"]],["ExistentialQ",["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]]],["StructuredEnglish","It is obligatory that some\tstudents\tare registered for at least one module"]],["Rule",["ObligationF",["LogicalNegation",["AtLeastNQ",["MinimumCardinality",["Number",51]],["Variable",["Number",0],["Term","student"]],["ExistentialQ",["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]]]],["StructuredEnglish","It is obligatory that at most 50\tstudents are registered for at least one module"]],["Rule",["ObligationF",["ExistentialQ",["Variable",["Number",0],["Term","student"]],["ExistentialQ",["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]]],["StructuredEnglish","It is obligatory that at least one\tstudent is registered for at least one module"]],["Rule",["ObligationF",["ExistentialQ",["Variable",["Number",0],["Term","student"]],["ExistentialQ",["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]]],["StructuredEnglish","It is obligatory that more than 0\tstudents are registered for at least one module"]],["Rule",["ObligationF",["ExactQ",["Cardinality",["Number",1]],["Variable",["Number",0],["Term","student"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is school president"]],["RoleBinding",["Term","student"],0]]]],["StructuredEnglish","It is obligatory that exactly one\tstudent is school president"]],["Rule",["ObligationF",["NumericalRangeQ",["MinimumCardinality",["Number",1]],["MaximumCardinality",["Number",50]],["Variable",["Number",0],["Term","student"]],["ExistentialQ",["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]]],["StructuredEnglish","It is obligatory that at least one and at most 50\tstudents are registered for at least one module"]],["Rule",["ObligationF",["ExistentialQ",["Variable",["Number",0],["Term","student"]],["ExistentialQ",["Variable",["Number",1],["Term","module"]],["ExistentialQ",["Variable",["Number",2],["Term","lecturer"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"],["Verb","with"],["Term","lecturer"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1],["RoleBinding",["Term","lecturer"],2]]]]]],["StructuredEnglish","It is obligatory that a student is registered for a module with a lecturer"]],["Rule",["ObligationF",["ExistentialQ",["Variable",["Number",0],["Term","student"],["ExistentialQ",["Variable",["Number",1],["Term","module"],["ExistentialQ",["Variable",["Number",2],["Term","study programme"]],["AtomicFormulation",["FactType",["Term","module"],["Verb","is available for"],["Term","study programme"]],["RoleBinding",["Term","module"],1],["RoleBinding",["Term","study programme"],2]]]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]],["ExistentialQ",["Variable",["Number",3],["Term","study programme"],["AtomicFormulation",["FactType",["Term","module"],["Verb","is available for"],["Term","study programme"]],["RoleBinding",["Term","module"],1],["RoleBinding",["Term","study programme"],3]]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is enrolled in"],["Term","study programme"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","study programme"],3]]]]],["StructuredEnglish","It is obligatory that a student that is registered for a module that is available for a study programme is enrolled in a study programme that the module is available for"]],["Rule",["ObligationF",["LogicalNegation",["ExistentialQ",["Variable",["Number",0],["Term","student"],["ExistentialQ",["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]],["LogicalNegation",["ExistentialQ",["Variable",["Number",2],["Term","study programme"],["AtomicFormulation",["FactType",["Term","module"],["Verb","is available for"],["Term","study programme"]],["RoleBinding",["Term","module"],1],["RoleBinding",["Term","study programme"],2]]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is enrolled in"],["Term","study programme"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","study programme"],2]]]]]]],["StructuredEnglish","It is obligatory that each student that is registered for a module is enrolled in a study programme that the module is available for"]],["Rule",["ObligationF",["ExactQ",["Cardinality",["Number",0]],["Variable",["Number",0],["Term","person"]],["AtomicFormulation",["FactType",["Term","person"],["Verb","is swimming"]],["RoleBinding",["Term","person"],0]]]],["StructuredEnglish","It is obligatory that exactly 0 people are swimming"]],["Rule",["ObligationF",["LogicalNegation",["ExistentialQ",["Variable",["Number",0],["Term","student"]],["LogicalNegation",["ExistentialQ",["Variable",["Number",1],["Term","module"],["ExistentialQ",["Variable",["Number",2],["Term","study programme"]],["AtomicFormulation",["FactType",["Term","module"],["Verb","is available for"],["Term","study programme"]],["RoleBinding",["Term","module"],1],["RoleBinding",["Term","study programme"],2]]]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]]]]],["StructuredEnglish","It is obligatory that each student is registered for a module that is available for a study programme"]],["Rule",["ObligationF",["LogicalNegation",["ExistentialQ",["Variable",["Number",0],["Term","student"],["AtomicFormulation",["FactType",["Term","student"],["Verb","is school president"]],["RoleBinding",["Term","student"],0]]],["LogicalNegation",["AtLeastNQ",["MinimumCardinality",["Number",8]],["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]]]]],["StructuredEnglish","It is obligatory that each student that is school president, is registered for at least 8 modules"]],["Rule",["ObligationF",["LogicalNegation",["ExistentialQ",["Variable",["Number",0],["Term","student"]],["LogicalNegation",["ExactQ",["Cardinality",["Number",1]],["Variable",["Number",1],["Term","age"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","has"],["Term","age"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","age"],1]]]]]]],["StructuredEnglish","It is obligatory that each student has exactly 1 age"]],["Rule",["ObligationF",["LogicalNegation",["ExistentialQ",["Variable",["Number",0],["Term","student"]],["LogicalNegation",["ExistentialQ",["Variable",["Number",1],["Term","educational institution"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is enrolled in"],["Term","educational institution"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","educational institution"],1]]]]]]],["StructuredEnglish","It is obligatory that each student is enrolled in an educational institution"]]];
//["Model",["Term","pilot",[]],["Term","plane",[]],["FactType",["Term","pilot"],["Verb","can fly"],["Term","plane"],[]],["FactType",["Term","pilot"],["Verb","is experienced"],[]],["Rule",["ObligationF",["UniversalQ",["Variable",["Number",0],["Term","pilot"]],["AtMostNQ",["MaximumCardinality",["Number",1]],["Variable",["Number",1],["Term","plane"]],["AtomicFormulation",["FactType",["Term","pilot"],["Verb","can fly"],["Term","plane"]],["RoleBinding",["Term","pilot"],0],["RoleBinding",["Term","plane"],1]]]]],["StructuredEnglish","It is obligatory that each pilot can fly at most 1 plane"]]]

//Demo:
//["Model",["Term","student",[]],["FactType",["Term","student"],["Verb","is school president"],[]],["Rule",["ObligationF",["ExistentialQ",["Variable",["Number",0],["Term","student"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is school president"]],["RoleBinding",["Term","student"],0]]]],["StructuredEnglish","It is obligatory that a student is school president"]],["Term","module",[]],["FactType",["Term","student"],["Verb","is registered for"],["Term","module"],[]],["Rule",["ObligationF",["UniversalQ",["Variable",["Number",0],["Term","student"]],["AtMostNQ",["MaximumCardinality",["Number",5]],["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]]],["StructuredEnglish","It is obligatory that each student is registered for at most 5 modules"]],["Term","study programme",[]],["FactType",["Term","student"],["Verb","is enrolled in"],["Term","study programme"],[]],["FactType",["Term","module"],["Verb","is available for"],["Term","study programme"],[]],["Rule",["ObligationF",["UniversalQ",["Variable",["Number",0],["Term","student"],["ExistentialQ",["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]],["ExistentialQ",["Variable",["Number",2],["Term","study programme"],["AtomicFormulation",["FactType",["Term","module"],["Verb","is available for"],["Term","study programme"]],["RoleBinding",["Term","module"],1],["RoleBinding",["Term","study programme"],2]]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is enrolled in"],["Term","study programme"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","study programme"],2]]]]],["StructuredEnglish","It is obligatory that each student that is registered for a module is enrolled in a study programme that the module is available for"]],["Term","lecturer",[]],["FactType",["Term","student"],["Verb","is under probation"],[]],["Rule",["ObligationF",["UniversalQ",["Variable",["Number",0],["Term","student"]],["AtMostNQ",["MaximumCardinality",["Number",5]],["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]]],["StructuredEnglish","It is obligatory that each student is registered for at most 5 modules"]],["Rule",["ObligationF",["UniversalQ",["Variable",["Number",0],["Term","student"],["AtomicFormulation",["FactType",["Term","student"],["Verb","is under probation"]],["RoleBinding",["Term","student"],0]]],["AtMostNQ",["MaximumCardinality",["Number",3]],["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]]],["StructuredEnglish","It is obligatory that each student that is under probation is registered for at most 3 modules"]],["Rule",["ObligationF",["AtMostNQ",["MaximumCardinality",["Number",10]],["Variable",["Number",0],["Term","student"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is under probation"]],["RoleBinding",["Term","student"],0]]]],["StructuredEnglish","It is obligatory that at most 10 students are under probation"]],["FactType",["Term","lecturer"],["Verb","grades"],["Term","student"],["Verb","for"],["Term","study programme"],["Verb","with grade"],[]],["Rule",["ObligationF",["LogicalNegation",["ExistentialQ",["Variable",["Number",0],["Term","student"],["AtomicFormulation",["FactType",["Term","student"],["Verb","is under probation"]],["RoleBinding",["Term","student"],0]]],["AtLeastNQ",["MinimumCardinality",["Number",3]],["Variable",["Number",1],["Term","study programme"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is enrolled in"],["Term","study programme"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","study programme"],1]]]]]],["StructuredEnglish","It is prohibited that a student that is under probation is enrolled in more than 2 study programmes"]],["Rule",["ObligationF",["UniversalQ",["Variable",["Number",0],["Term","student"]],["UniversalQ",["Variable",["Number",1],["Term","module"]],["AtomicFormulation",["FactType",["Term","student"],["Verb","is registered for"],["Term","module"]],["RoleBinding",["Term","student"],0],["RoleBinding",["Term","module"],1]]]]],["StructuredEnglish","It is obligatory that each student is registered for each module"]],["Rule",["ObligationF",["UniversalQ",["Variable",["Number",0],["Term","module"]],["ExactQ",["Cardinality",["Number",1]],["Variable",["Number",1],["Term","study programme"]],["AtomicFormulation",["FactType",["Term","module"],["Verb","is available for"],["Term","study programme"]],["RoleBinding",["Term","module"],0],["RoleBinding",["Term","study programme"],1]]]]],["StructuredEnglish","It is obligatory that each module is available for exactly 1 study programme"]]]

//Synonymous Form:
// ["Model",["Term","species",[]],["Term","name",[]],["FactType",["Term","species"],["Verb","has"],["Term","name"],[["SynonymousForm",[["Term","name"],["Verb","is of"],["Term","species"],[]]]]],["Rule",["ObligationF",["UniversalQ",["Variable",["Number",0],["Term","name"]],["AtMostNQ",["MaximumCardinality",["Number",1]],["Variable",["Number",1],["Term","species"]],["AtomicFormulation",["FactType",["Term","species"],["Verb","has"],["Term","name"]],["RoleBinding",["Term","name"],0],["RoleBinding",["Term","species"],1]]]]],["StructuredEnglish","It is obligatory that each name is of at most 1 species"]]]

//IAH:
["Model",["Term","Resource",[]],["Term","Integer",[]],["Term","Long Text",[]],["Term","Short Text",[]],["Term","species",[]],["Term","genus",[]],["FactType",["Term","species"],["Verb","belongs to"],["Term","genus"],[]],["Rule",["ObligationF",["UniversalQ",["Variable",["Number",0],["Term","species"]],["ExactQ",["Cardinality",["Number",1]],["Variable",["Number",1],["Term","genus"]],["AtomicFormulation",["FactType",["Term","species"],["Verb","belongs to"],["Term","genus"]],["RoleBinding",["Term","species"],0],["RoleBinding",["Term","genus"],1]]]]],["StructuredEnglish","It is obligatory that each species belongs to exactly 1 genus"]],["Term","senior synonym",[["ConceptType",["Term","Short Text"]]]],["Term","notes",[["ConceptType",["Term","Long Text"]]]],["Term","habitat",[["ConceptType",["Term","Long Text"]]]],["FactType",["Term","species"],["Verb","has"],["Term","notes"],[]],["FactType",["Term","species"],["Verb","has"],["Term","habitat"],[]],["FactType",["Term","species"],["Verb","has"],["Term","senior synonym"],[]],["Term","name",[["ConceptType",["Term","Short Text"]]]],["FactType",["Term","species"],["Verb","has"],["Term","name"],[]],["Rule",["ObligationF",["UniversalQ",["Variable",["Number",0],["Term","species"]],["ExactQ",["Cardinality",["Number",1]],["Variable",["Number",1],["Term","senior synonym"]],["AtomicFormulation",["FactType",["Term","species"],["Verb","has"],["Term","senior synonym"]],["RoleBinding",["Term","species"],0],["RoleBinding",["Term","senior synonym"],1]]]]],["StructuredEnglish","It is obligatory that each species has exactly 1 senior synonym"]],["Rule",["ObligationF",["UniversalQ",["Variable",["Number",0],["Term","name"]],["AtMostNQ",["MaximumCardinality",["Number",1]],["Variable",["Number",1],["Term","species"]],["AtomicFormulation",["FactType",["Term","name"],["Verb","is of"],["Term","species"]],["RoleBinding",["Term","name"],0],["RoleBinding",["Term","species"],1]]]]],["StructuredEnglish","It is obligatory that each name is of at most 1 species"]],["FactType",["Term","genus"],["Verb","has"],["Term","name"],[]],["Rule",["ObligationF",["UniversalQ",["Variable",["Number",0],["Term","genus"]],["ExactQ",["Cardinality",["Number",1]],["Variable",["Number",1],["Term","name"]],["AtomicFormulation",["FactType",["Term","genus"],["Verb","has"],["Term","name"]],["RoleBinding",["Term","genus"],0],["RoleBinding",["Term","name"],1]]]]],["StructuredEnglish","It is obligatory that each genus has exactly 1 name"]],["Rule",["ObligationF",["UniversalQ",["Variable",["Number",0],["Term","name"]],["AtMostNQ",["MaximumCardinality",["Number",1]],["Variable",["Number",1],["Term","genus"]],["AtomicFormulation",["FactType",["Term","name"],["Verb","is of"],["Term","genus"]],["RoleBinding",["Term","name"],0],["RoleBinding",["Term","genus"],1]]]]],["StructuredEnglish","It is obligatory that each name is of at most 1 genus"]],["Term","image",[]],["FactType",["Term","species"],["Verb","is documented in"],["Term","image"],[]],["Term","type",[["Definition",["Enum",["wing","other"]]]]],["FactType",["Term","image"],["Verb","has"],["Term","type"],[]],["Rule",["ObligationF",["UniversalQ",["Variable",["Number",0],["Term","image"]],["ExactQ",["Cardinality",["Number",1]],["Variable",["Number",1],["Term","type"]],["AtomicFormulation",["FactType",["Term","image"],["Verb","has"],["Term","type"]],["RoleBinding",["Term","image"],0],["RoleBinding",["Term","type"],1]]]]],["StructuredEnglish","It is obligatory that each image has exactly 1 type"]],["Term","publication",[]],["Term","author",[]],["Term","year",[["ConceptType",["Term","Integer"]]]],["FactType",["Term","publication"],["Verb","has"],["Term","author"],[]],["FactType",["Term","publication"],["Verb","was in"],["Term","year"],[]],["Term","DOI",[]],["FactType",["Term","publication"],["Verb","has"],["Term","DOI"],[]],["FactType",["Term","publication"],["Verb","is in library"],[]],["Term","pathogen",[]],["FactType",["Term","species"],["Verb","is vector for"],["Term","pathogen"],[["TermForm",["Term","vector relationship"]]]],["FactType",["Term","vector relationship"],["Verb","is documented in"],["Term","publication"],[]],["Term","host",[]],["FactType",["Term","species"],["Verb","feeds on"],["Term","host"],[["TermForm",["Term","feeding relationship"]]]],["FactType",["Term","feeding relationship"],["Verb","is documented in"],["Term","publication"],[]],["Term","region",[]],["FactType",["Term","species"],["Verb","lives in"],["Term","region"],[["TermForm",["Term","species residence"]]]],["FactType",["Term","species residence"],["Verb","is documented in"],["Term","publication"],[]],["Term","description",[]],["FactType",["Term","species"],["Verb","has"],["Term","description"],[]],["FactType",["Term","description"],["Verb","assigns"],["Term","name"],[]],["FactType",["Term","publication"],["Verb","makes"],["Term","description"],[]],["FactType",["Term","description"],["Verb","is within"],["Term","genus"],[]],["FactType",["Term","description"],["Verb","was first made in"],["Term","publication"],[]]]

//Term Form Rule:
// ["Model",["Term","species",[]],["Term","publication",[]],["Term","region",[]],["FactType",["Term","species"],["Verb","lives in"],["Term","region"],[["TermForm",["Term","species residence"]]]],["FactType",["Term","species residence"],["Verb","is documented in"],["Term","publication"],[]],["Rule",["ObligationF",["UniversalQ",["Variable",["Number",0],["Term","species residence"]],["ExactQ",["Cardinality",["Number",1]],["Variable",["Number",1],["Term","publication"]],["AtomicFormulation",["FactType",["Term","species residence"],["Verb","is documented in"],["Term","publication"]],["RoleBinding",["Term","species residence"],0],["RoleBinding",["Term","publication"],1]]]]],["StructuredEnglish","It is obligatory that each species residence is documented in exactly 1 publication"]]]



instance = LF2AbstractSQLPrep.createInstance();
try {
	console.log('Part 1: Prepare LF');
	result = instance.match(
		model
		, 'Process'
	);
	// prettify('result', result)
	// console.log(Prettify.match(result, 'Process'));

	instance = LF2AbstractSQL.createInstance();
	console.log('Part 2: Generate abstract');
	result = instance.match(
		result
		, 'Process'
	);
	// prettify('result', result);
	// console.log(Prettify.match(result.rules, 'Process'));
	
	// console.log(_.isEqual(model, result));
	
	// console.log('Part 3: Optimise');
	// for(var i=0;i<result.rules.length;i++) {
		// instance = AbstractSQLOptimiser.createInstance();
		// // console.log(result.rules[i][1][1]);
		// // console.log(Prettify.match(result.rules[i][2][1], 'Process'));
		// result.rules[i][2][1] = instance.match(
			// result.rules[i][2][1]
			// , 'Process'
		// );
		// // console.log(Prettify.match(result.rules[i][2][1], 'Process'));
		
		// // console.log(
			// // AbstractSQLRules2SQL.match(
				// // result.rules[i][2][1]
				// // , 'Process'
			// // )
		// // );
		
	// }
	
	try {
		console.log('Part 4: Generate SQL');
		result = AbstractSQL2SQL(result);
		// console.log(prettify('result', result));
	}
	catch(e) {
		console.log(e)
		console.log(e.stack)
	}
}
catch(e) {
	console.log(e.stack)
	console.log(instance.input);
	console.log(Prettify.match(instance.input.hd, 'Process'));
	// console.log(instance.tables, instance.terms, instance.conceptTypes, instance.rules);
}